# adrestia-assertions/azure-pipelines.yml
# (c) 2020 Sam Caldwell.  See LICENSE.txt.
#
---
trigger:
  - master
  - development

jobs:
  - job: BuildTestLinux
    pool:
      vmImage: 'ubuntu-latest'
      timeoutInMinutes: 120
    steps:
      - checkout: self
        path: git

      - checkout: self
        path: git/github.com/sam-caldwell/adrestia-assertions/pkg

      - task: GoTool@0
        inputs:
          version: '1.13.5'

      - script:
          /bin/bash -x
          ls -la
          echo "$(System.DefaultWorkingDirectory)"
          cd $(System.DefaultWorkingDirectory)
          export GOPATH=/home/vsts/work/1/git
          go test -v
        displayName: Go Test
        enabled: true
        continueOnError: false
#
#  - job: BuildTestMacOs
#    pool:
#      vmImage: 'macOS-latest'
#      timeoutInMinutes: 120
#    steps:
#      - checkout: self
#        # See BUILD_DIR.
#        path: git
#
#      - script: go version
#        displayName: Go Version
#        continueOnError: false
#        enabled: true
#
#      - script: |
#          GOPATH=$GOPATH:$(pwd)
#          go test -v
#        displayName: Run Golang tests.
#        continueOnError: false
#        enabled: true
#
#  - job: BuildTestWindows
#    pool:
#      vmImage: 'windows-latest'
#      timeoutInMinutes: 120
#    steps:
#      - checkout: self
#        # See BUILD_DIR.
#        path: git
#
#      - script: go version
#        displayName: Go Version
#        continueOnError: false
#        enabled: true
#
#      - script: |
#          SET GOPATH=$GOPATH:$(pwd)
#          go test -v
#        displayName: Run Golang tests.
#        continueOnError: false
#        enabled: true

# ToDo: On successful builds, update tags for the given build.
#       Tag: <build>-release or <build>-development.
